<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, November 21, 2020, 7:40 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "Tallimos_SOH_Imm" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Tallimos_SOH_Imm"
   author="Tallimos"
   id="03cda78cffb57ebed4f3b48c"
   language="Lua"
   purpose="Simple script to show you secret keywords of Imm mobs in school of horrors"
   save_state="y"
   date_written="2020-11-21 19:39:22"
   requires="4.30"
   version="1.1"
   >

</plugin>

<!--  Get our standard constants -->

<include name="constants.lua"/>


<!--  Triggers  -->

<triggers>
	<trigger
		script="EndOfSearch"
		group="ImmSearchTrig"
		match="^End of SOH IMM SEARCH$"
		name="EndofImmSearch"
		regexp="y"
		sequence="90"
		omit_from_output="y"
		>
	</trigger>
</triggers>

<!--  Aliases  -->

<aliases>
	<alias
		match="^(?:timm|tsoh) (.*?)$"
		enabled="y"
		script="CheckImm"
		regexp="y"
		sequence="110"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^(?:timm|tsoh) (?:chan|channel) (\w+) (.*?)$"
		enabled="y"
		script="CheckImmChannel"
		regexp="y"
		sequence="100"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^(?:timm|tsoh) tell (\w+) (.*?)$"
		enabled="y"
		script="CheckImmTell"
		regexp="y"
		sequence="100"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^(?:timm|tsoh) List$"
		enabled="y"
		script="CheckImmList"
		regexp="y"
		sequence="90"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^(?:timm|tsoh) Help$"
		enabled="y"
		script="timm_help"
		regexp="y"
		sequence="90"
		ignore_case="y"
		>
	</alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[

require "aard_register_z_on_create"

require "tprint"
require "mw_theme_base"
require "serialize"
require "commas"
require "gmcphelper"
require "copytable"
require "aardmapper"
require "aard_lua_extras"
require "wait"

local msg_colour      = "lightslategrey"
local err_colour      = "firebrick"
local help_colour     = "lightslategrey"
local qty_colour      = "cyan"
local optional_colour = "lightcoral"
local command_colour  = "white"
local cmd_required    = "royalblue"
local help_command_colour  = "red"

local noteline = "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="

function CheckImmList(name, line, wc)
	local title = "School of Horrors IMM Secret Keyword - Entire List"
	
	local leng = tonumber(string.len(title))
	local leng2 = 80
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
		lendif = lendif * 0.5
	end

	spacing = string.rep(" ", lendif)

	ColourNote(msg_colour, "", spacing, msg_colour, "", "School of Horrors IMM Secret Keyword - ", qty_colour, "", "Entire List")
	Note()
	
	for i,v in ipairs(ImmTable) do
		immnum = i
		
		
		if ImmTable[immnum]["Short"] == nil then namespace = 24 else namespace = MakeSpace(ImmTable[immnum]["Short"], 24) end

		ColourNote(msg_colour, "", "Imm: ", help_command_colour, "", ImmTable[immnum]["Short"] .. namespace, msg_colour, "", " Secret Keyword(s): ", help_command_colour, "", ImmTable[immnum]["Secret"])
	end	
end

function CheckImm(name, line, wc)
	channel = "none"
	search = string.lower(wc[1])
	
	SearchImm(search, channel)
end

function CheckImmChannel(name, line, wc)
	channel = wc[1]
	search = string.lower(wc[2])
	
	SearchImm(search, channel)
end

function CheckImmTell(name, line, wc)
	channel = wc[1]
	search = string.lower(wc[2])
	tellcheck = "YES"
	
	SearchImm(search, channel)
end

function SearchImm(SearchItem, channel)
	NotFound = "YES"
	AmtFound = 0
	
	world.EnableGroup ("ImmSearchTrig", 1)
	
	if channel == "none" then
		local title = "School of Horrors IMM Secret Keyword - Searching for " .. SearchItem
		
		local leng = tonumber(string.len(title))
		local leng2 = 80
		
		local spacing = 0
		local lendif = 0
		
		if leng > leng2 then
		else
			lendif = leng2 - leng
			lendif = lendif * 0.5
		end

		spacing = string.rep(" ", lendif)

		ColourNote(msg_colour, "", spacing, msg_colour, "", "School of Horrors IMM Secret Keyword - Searching for ", qty_colour, "", SearchItem)
		Note()
	end
	
	for i,v in ipairs(ImmTable) do
		immnum = i
		
		local search = string.lower(ImmTable[immnum]["Short"])
		
        len = string.len(SearchItem)

		for i,v in pairs(string.split(search," ")) do
			if string.find(string.sub(v,1,len),SearchItem) == nil then
			else
				NotFound = "NO"
				AmtFound = AmtFound + 1
				
				if channel == "none" then 
					CommandToSend = "scan " .. ImmTable[immnum]["Secret"]
					skey = ImmTable[immnum]["Secret"]
					
					if ImmTable[immnum]["Short"] == nil then namespace = 24 else namespace = MakeSpace(ImmTable[immnum]["Short"], 24) end

					ColourNote(msg_colour, "", "Imm: ", help_command_colour, "", ImmTable[immnum]["Short"] .. namespace, msg_colour, "", " Secret Keyword(s): ", help_command_colour, "", ImmTable[immnum]["Secret"])
				else
					message = "@DImm: @C" .. ImmTable[immnum]["Short"] .. " @DSecret Keyword(s): @C" .. ImmTable[immnum]["Secret"] .. "@w"
				
					if tellcheck == "YES" then
						tellcheck = "NO"
						
						SendNoEcho("tell " .. channel .. " @R[SOH] " .. message)
					else
						SendNoEcho(channel .. " @R[SOH] " .. message)
					end
				end
			end
		end
	end
	
	SendNoEcho ("echo End of SOH IMM SEARCH")
end -- SearchImm

function EndOfSearch()
	if NotFound == "NO" then 
		if channel == "none" then
			local Command = string.gsub (CommandToSend, " %(no unique%)", "")
		
			if AmtFound == 1 then
				SetCommand (Command)
				SetClipboard(skey)
			end
		end
	elseif NotFound == "YES" then
		if channel == "none" then	
			local title = "No Results Found"
		
			local leng = tonumber(string.len(title))
			local leng2 = 80

			local spacing = 0
			local lendif = 0

			if leng > leng2 then
			else
				lendif = leng2 - leng
				lendif = lendif * 0.5
			end

			spacing = string.rep(" ", lendif)

			Note()
			ColourNote(msg_colour, "", spacing, msg_colour, "", "No Results Found")
		else
			if tellcheck == "YES" then
				tellcheck = "NO"
				SendNoEcho("tell " .. channel .. " @R[SOH] @DSorry no results found for @C" .. search .. "@D.@w")
			else
				SendNoEcho(channel .. " @R[SOH] @DSorry no results found for @C" .. search .. "@D.@w")
			end
		end
	end
	
	world.EnableGroup ("ImmSearchTrig", 0)
end

function CreateImmTable()
	ImmTable = {}

	ImmTable[1] = {}
	ImmTable[1]["Short"] = "(helper) Fenix"
	ImmTable[1]["Secret"] = "helper goodimm"
	ImmTable[2] = {}
	ImmTable[2]["Short"] = "An Evil Form of Sagen"
	ImmTable[2]["Secret"] = "form notcarlsagen"
	ImmTable[3] = {}
	ImmTable[3]["Short"] = "Angelic Demonspawn"
	ImmTable[3]["Secret"] = "angelic"
	ImmTable[4] = {}
	ImmTable[4]["Short"] = "Bubbly Obyron"
	ImmTable[4]["Secret"] = "bubbly oybonr"
	ImmTable[5] = {}
	ImmTable[5]["Short"] = "Cuddlebear Koala"
	ImmTable[5]["Secret"] = "cuddlebear"
	ImmTable[6] = {}
	ImmTable[6]["Short"] = "Dejected Broud"
	ImmTable[6]["Secret"] = "dejected justgiveupnowok"
	ImmTable[7] = {}
	ImmTable[7]["Short"] = "Disagreeable Rumour"
	ImmTable[7]["Secret"] = "disagreeable"
	ImmTable[8] = {}
	ImmTable[8]["Short"] = "Disoriented Dadrake"
	ImmTable[8]["Secret"] = "disoriented"
	ImmTable[9] = {}
	ImmTable[9]["Short"] = "Evil Aaeron"
	ImmTable[9]["Secret"] = "shinythings"
	ImmTable[10] = {}
	ImmTable[10]["Short"] = "Evil Althalus"
	ImmTable[10]["Secret"] = "homeskillet"
	ImmTable[11] = {}
	ImmTable[11]["Short"] = "Evil Belmont"
	ImmTable[11]["Secret"] = "bridgetroll"
	ImmTable[12] = {}
	ImmTable[12]["Short"] = "Evil Domain"
	ImmTable[12]["Secret"] = "fishwacker"
	ImmTable[13] = {}
	ImmTable[13]["Short"] = "Evil Euphonix"
	ImmTable[13]["Secret"] = "ragbrai"
	ImmTable[14] = {}
	ImmTable[14]["Short"] = "Evil Ghaan"
	ImmTable[14]["Secret"] = "longghaan"
	ImmTable[15] = {}
	ImmTable[15]["Short"] = "Evil Halo"
	ImmTable[15]["Secret"] = "fallen jackandcoke"
	ImmTable[16] = {}
	ImmTable[16]["Short"] = "Evil Ikyu"
	ImmTable[16]["Secret"] = "ickypoo"
	ImmTable[17] = {}
	ImmTable[17]["Short"] = "Evil Justme"
	ImmTable[17]["Secret"] = "helperisme"
	ImmTable[18] = {}
	ImmTable[18]["Short"] = "Evil Kharpern"
	ImmTable[18]["Secret"] = "kittyimm"
	ImmTable[19] = {}
	ImmTable[19]["Short"] = "Evil Klauwaard"
	ImmTable[19]["Secret"] = "tricksy"
	ImmTable[20] = {}
	ImmTable[20]["Short"] = "Evil Kt"
	ImmTable[20]["Secret"] = "ktkat"
	ImmTable[21] = {}
	ImmTable[21]["Short"] = "Evil Lasher"
	ImmTable[21]["Secret"] = "thearchitect"
	ImmTable[22] = {}
	ImmTable[22]["Short"] = "Evil Madcatz"
	ImmTable[22]["Secret"] = "mathizard"
	ImmTable[23] = {}
	ImmTable[23]["Short"] = "Evil Maerchyng"
	ImmTable[23]["Secret"] = "maerchyng"
	ImmTable[24] = {}
	ImmTable[24]["Short"] = "Evil Morrigu"
	ImmTable[24]["Secret"] = "devil morrigu"
	ImmTable[25] = {}
	ImmTable[25]["Short"] = "Evil OrcWarrior"
	ImmTable[25]["Secret"] = "sheepshagger"
	ImmTable[26] = {}
	ImmTable[26]["Short"] = "Evil Pane"
	ImmTable[26]["Secret"] = "painintheneck"
	ImmTable[27] = {}
	ImmTable[27]["Short"] = "Evil Plaideleon"
	ImmTable[27]["Secret"] = "crazycanadian"
	ImmTable[28] = {}
	ImmTable[28]["Short"] = "Evil Rekhart"
	ImmTable[28]["Secret"] = "hartsawreck"
	ImmTable[29] = {}
	ImmTable[29]["Short"] = "Evil Sarlock"
	ImmTable[29]["Secret"] = "l33td00d"
	ImmTable[30] = {}
	ImmTable[30]["Short"] = "Evil Tela"
	ImmTable[30]["Secret"] = "telllllllla"
	ImmTable[31] = {}
	ImmTable[31]["Short"] = "Evil Timeghost"
	ImmTable[31]["Secret"] = "floppyimm"
	ImmTable[32] = {}
	ImmTable[32]["Short"] = "Evil Tripitaka"
	ImmTable[32]["Secret"] = "laketripit"
	ImmTable[33] = {}
	ImmTable[33]["Short"] = "Evil Tymme"
	ImmTable[33]["Secret"] = "hourglass time"
	ImmTable[34] = {}
	ImmTable[34]["Short"] = "Evil Vladia"
	ImmTable[34]["Secret"] = "sexyvamp"
	ImmTable[35] = {}
	ImmTable[35]["Short"] = "Evil Whitdjinn"
	ImmTable[35]["Secret"] = "thundercat"
	ImmTable[36] = {}
	ImmTable[36]["Short"] = "Evil Windjammer"
	ImmTable[36]["Secret"] = "justsomeimm"
	ImmTable[37] = {}
	ImmTable[37]["Short"] = "Evil Wolfe"
	ImmTable[37]["Secret"] = "likeobybutbritish"
	ImmTable[38] = {}
	ImmTable[38]["Short"] = "Evil Xyzzy"
	ImmTable[38]["Secret"] = "weirdcode"
	ImmTable[39] = {}
	ImmTable[39]["Short"] = "Good Aerianne"
	ImmTable[39]["Secret"] = "bouncyimm"
	ImmTable[40] = {}
	ImmTable[40]["Short"] = "Good Cadaver"
	ImmTable[40]["Secret"] = "newbiehater"
	ImmTable[41] = {}
	ImmTable[41]["Short"] = "Good Delight"
	ImmTable[41]["Secret"] = "turkishdelight"
	ImmTable[42] = {}
	ImmTable[42]["Short"] = "Good Dirtworm"
	ImmTable[42]["Secret"] = "wormy"
	ImmTable[43] = {}
	ImmTable[43]["Short"] = "Good Eclaboussure"
	ImmTable[43]["Secret"] = "dropbearimm"
	ImmTable[44] = {}
	ImmTable[44]["Short"] = "Good Filt"
	ImmTable[44]["Secret"] = "plainolefilt"
	ImmTable[45] = {}
	ImmTable[45]["Short"] = "Good Glimmer"
	ImmTable[45]["Secret"] = "betterhalfofclaire"
	ImmTable[46] = {}
	ImmTable[46]["Short"] = "Good Kinson"
	ImmTable[46]["Secret"] = "upgradeboy"
	ImmTable[47] = {}
	ImmTable[47]["Short"] = "Good Lumina"
	ImmTable[47]["Secret"] = "thievesrus"
	ImmTable[48] = {}
	ImmTable[48]["Short"] = "Good Oladon"
	ImmTable[48]["Secret"] = "spellingbee"
	ImmTable[49] = {}
	ImmTable[49]["Short"] = "Good Rhuli"
	ImmTable[49]["Secret"] = "rulistheworld"
	ImmTable[50] = {}
	ImmTable[50]["Short"] = "Good Sausage"
	ImmTable[50]["Secret"] = "fatbreakfast"
	ImmTable[51] = {}
	ImmTable[51]["Short"] = "Good Sirene"
	ImmTable[51]["Secret"] = "warriorprincess"
	ImmTable[52] = {}
	ImmTable[52]["Short"] = "Good Takihisis"
	ImmTable[52]["Secret"] = "dragonlady"
	ImmTable[53] = {}
	ImmTable[53]["Short"] = "Good Terrill"
	ImmTable[53]["Secret"] = "askcitron"
	ImmTable[54] = {}
	ImmTable[54]["Short"] = "Good Tyanon"
	ImmTable[54]["Secret"] = "tieoneon"
	ImmTable[55] = {}
	ImmTable[55]["Short"] = "Good Valkur"
	ImmTable[55]["Secret"] = "demonlord"
	ImmTable[56] = {}
	ImmTable[56]["Short"] = "Good Vilgan"
	ImmTable[56]["Secret"] = "unabridged"
	ImmTable[57] = {}
	ImmTable[57]["Short"] = "Good Xantcha"
	ImmTable[57]["Secret"] = "pokerimm"
	ImmTable[58] = {}
	ImmTable[58]["Short"] = "Good Zane"
	ImmTable[58]["Secret"] = "inzanity"
	ImmTable[59] = {}
	ImmTable[59]["Short"] = "Goodie Goodie Jaenelle"
	ImmTable[59]["Secret"] = "Goodie sut"
	ImmTable[60] = {}
	ImmTable[60]["Short"] = "Impatient Styliann"
	ImmTable[60]["Secret"] = "impatient"
	ImmTable[61] = {}
	ImmTable[61]["Short"] = "Kinda-Sorta Good Whisper"
	ImmTable[61]["Secret"] = "kinda"
	ImmTable[62] = {}
	ImmTable[62]["Short"] = "Master Shen"
	ImmTable[62]["Secret"] = "master neutral"
	ImmTable[63] = {}
	ImmTable[63]["Short"] = "Mathematical Mordist"
	ImmTable[63]["Secret"] = "mathematical complex"
	ImmTable[64] = {}
	ImmTable[64]["Short"] = "Nascaard Rezit"
	ImmTable[64]["Secret"] = "nascaard jlo evilimm"
	ImmTable[65] = {}
	ImmTable[65]["Short"] = "Pandemonium Penthesilea"
	ImmTable[65]["Secret"] = "pandemonium discord"
	ImmTable[66] = {}
	ImmTable[66]["Short"] = "Record Holding Guinness"
	ImmTable[66]["Secret"] = "record cantwriteatall"
	ImmTable[67] = {}
	ImmTable[67]["Short"] = "Singing Paramore"
	ImmTable[67]["Secret"] = "singing"
	ImmTable[68] = {}
	ImmTable[68]["Short"] = "Sith Lord Neeper"
	ImmTable[68]["Secret"] = "sithlord"
	ImmTable[69] = {}
	ImmTable[69]["Short"] = "Smurfy Laren"
	ImmTable[69]["Secret"] = "smurfy"
	ImmTable[70] = {}
	ImmTable[70]["Short"] = "Sober Citron"
	ImmTable[70]["Secret"] = "sober"
	ImmTable[71] = {}
	ImmTable[71]["Short"] = "Socialite Arthon"
	ImmTable[71]["Secret"] = "socialite"
	ImmTable[72] = {}
	ImmTable[72]["Short"] = "Straight Dreamfyre"
	ImmTable[72]["Secret"] = "straight"
	ImmTable[73] = {}
	ImmTable[73]["Short"] = "The Cool Version of Xeno"
	ImmTable[73]["Secret"] = "cool bug onex"
	ImmTable[74] = {}
	ImmTable[74]["Short"] = "The Pancake Flat"
	ImmTable[74]["Secret"] = "pancake blinkblink"
	ImmTable[75] = {}
	ImmTable[75]["Short"] = "Tjopping Quadrapus"
	ImmTable[75]["Secret"] = "tjopping"
	ImmTable[76] = {}
	ImmTable[76]["Short"] = "Unhelpful Claire"
	ImmTable[76]["Secret"] = "unhelpful"
	ImmTable[77] = {}
	ImmTable[77]["Short"] = "Unremarkable Korridel"
	ImmTable[77]["Secret"] = "unremarkable whatshisname alwaysthelastpicked"
	ImmTable[78] = {}
	ImmTable[78]["Short"] = "Unrestrained Elvendar"
	ImmTable[78]["Secret"] = "unrestrained"
	ImmTable[79] = {}
	ImmTable[79]["Short"] = "Warsnail Anaristos"
	ImmTable[79]["Secret"] = "warsnail"

end

function MakeSpace(title, maxleng)
	local leng = tonumber(string.len(title))
	local leng2 = tonumber(maxleng)
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
	end

	spacing = string.rep(" ", lendif)
	return spacing
end -- MakeSpace

function HelpSpacing(title, title2)
	local leng = tonumber(string.len(title))
	local leng2 = tonumber(string.len(title2))
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
		lendif = lendif * 0.5
	end

	spacing = string.rep(" ", lendif)
	
	return spacing
end -- HelpSpacing

function timm_help()
	local title = "Tallimos' SOH IMM Secret Keywords v" .. PLUGIN_VERSION .. " Help"
	local title2 = noteline

	spacing = HelpSpacing(title, title2)
	
	ColourNote(help_colour, "", spacing, help_command_colour, "", "Tallimos' SOH IMM Secret Keywords v" .. PLUGIN_VERSION .. " Help")
	ColourNote(help_colour, "", title2)
	ColourNote(help_colour, "", "This plugin gives the user a quick reference to keywords for the imm mobs in School of Horrors.")
	ColourNote(help_colour, "", title2)

	ColourNote(help_colour, "", "The user can use either ", help_command_colour, "", "timm", help_colour, "", " or ", help_command_colour, "", "tsoh")
	Note("")
	
	ColourNote(help_command_colour, "", "timm list                  ", help_colour, "", " - command to display the entire list of imms and their keywords")

	ColourNote(help_command_colour, "", "timm <imm name>            ", help_colour, "", " - command used to search the list for a particular imm")
	
	ColourNote(help_command_colour, "", "timm chan <chan> <imm name>", help_colour, "", " - command used to search the list for a particular imm and display")
	ColourNote(help_colour, "", "                              it to a channel")
	
	ColourNote(help_command_colour, "", "timm tell <char> <imm name>", help_colour, "", " - command used to search the list for a particular imm and display")
	ColourNote(help_colour, "", "                              it in a tell")
	
	Note("")
	
	ColourNote(help_command_colour, "", "PLEASE NOTE", help_colour, "", ": <imm name> can be the full name of mob, '", qty_colour, "", "Lasher", help_colour, "", "', or partial like '", qty_colour, "", "Lash", msg_colour, "", "'")

	ColourNote(help_colour, "", title2)
	Note("")

end	-- timm_help

function OnPluginInstall ()
	PLUGIN_VERSION  = GetPluginInfo(GetPluginID(), 19)
	PLUGIN_NAME   = GetPluginInfo(GetPluginID(), 1)
	
	ColourNote(help_colour, "", "Thank you for installing Tallimos' SOH Imm Secret Keywords v", qty_colour, "", PLUGIN_VERSION, msg_colour, "", ". Please see ", help_command_colour, "", "timm help", help_colour, "", " for more information.")
	
	CreateImmTable()
end

function OnPluginEnable()
	CreateImmTable()
end

]]>
</script>
</muclient>
