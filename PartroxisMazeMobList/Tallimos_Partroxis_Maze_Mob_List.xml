<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Saturday, November 21, 2020, 7:40 PM -->
<!-- MuClient version 5.07-pre -->

<!-- Plugin "Tallimos_SOH_Part" generated by Plugin Wizard -->

<muclient>
<plugin
   name="Tallimos_Partroxis_Maze_Mob_List"
   author="Tallimos"
   id="3106664174f970238e1593ce"
   language="Lua"
   purpose="Simple script to show the room number of the maze mobs in partroxis"
   save_state="y"
   date_written="2020-11-21 19:39:22"
   requires="4.36"
   version="1.10"
   >

</plugin>

<!--  Get our standard constants -->

<include name="constants.lua"/>


<!--  Triggers  -->

<triggers>
	<trigger
		script="EndOfSearch"
		group="PartSearchTrig"
		match="^End of PARTROXIS SEARCH$"
		name="EndofPartSearch"
		regexp="y"
		sequence="90"
		omit_from_output="y"
		>
	</trigger>
</triggers>

<!--  Aliases  -->

<aliases>
	<alias
		match="^tpart (.*?)$"
		enabled="y"
		script="CheckPart"
		regexp="y"
		sequence="110"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^tpart (?:chan|channel) (\w+) (.*?)$"
		enabled="y"
		script="CheckPartChannel"
		regexp="y"
		sequence="100"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^tpart tell (\w+) (.*?)$"
		enabled="y"
		script="CheckPartTell"
		regexp="y"
		sequence="100"
		ignore_case="y"
		>
	</alias>	
	<alias
		match="^tpart List$"
		enabled="y"
		script="CheckPartList"
		regexp="y"
		sequence="90"
		ignore_case="y"
		>
	</alias>
	<alias
		match="^tpart Help$"
		enabled="y"
		script="tpart_help"
		regexp="y"
		sequence="90"
		ignore_case="y"
		>
	</alias>
</aliases>

<!--  Script  -->

<script>
<![CDATA[

require "aard_register_z_on_create"

require "tprint"
require "mw_theme_base"
require "serialize"
require "commas"
require "gmcphelper"
require "copytable"
require "aardmapper"
require "aard_lua_extras"
require "wait"

local msg_colour      = "lightslategrey"
local err_colour      = "firebrick"
local help_colour     = "lightslategrey"
local qty_colour      = "cyan"
local optional_colour = "lightcoral"
local command_colour  = "white"
local cmd_required    = "royalblue"
local help_command_colour  = "red"

local noteline = "=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="

function CheckPartList(name, line, wc)
	local title = "Partroxis Maze Mob List - Entire List"
	
	local leng = tonumber(string.len(title))
	local leng2 = 80
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
		lendif = lendif * 0.5
	end

	spacing = string.rep(" ", lendif)

	ColourNote(msg_colour, "", spacing, msg_colour, "", "Partroxis Mob List - ", qty_colour, "", "Entire List")
	Note()
	
	for i,v in ipairs(PartTable) do
		partnum = i
		pleng = tonumber(string.len(partnum))
		
		if pleng == 1 then 
			roomnum = " " .. i
		else
			roomnum = i
		end
		
		if PartTable[partnum]["Room"] == nil then roomspace = 28 else roomspace = MakeSpace(PartTable[partnum]["Room"], 28) end
		
		ColourNote(msg_colour, "", "Room #: ", qty_colour, "", roomnum, msg_colour, "", " Room Name: ", qty_colour, "", PartTable[partnum]["Room"] .. roomspace, msg_colour, "", " Mob: ", qty_colour, "", PartTable[partnum]["Mob"])
	end
end -- CheckPartList

function CheckPart(name, line, wc)
	channel = "none"
	search = string.lower(wc[1])
	
	SearchPart(search, channel)
end

function CheckPartChannel(name, line, wc)
	channel = wc[1]
	search = string.lower(wc[2])
	
	SearchPart(search, channel)
end

function CheckPartTell(name, line, wc)
	channel = wc[1]
	search = string.lower(wc[2])
	tellcheck = "YES"
	
	SearchPart(search, channel)
end

function SearchPart(SearchItem, channel)
	NotFound = "YES"
	
	world.EnableGroup ("PartSearchTrig", 1)
	
	if channel == "none" then
		local title = "Partroxis Maze Mob List - Searching for " .. SearchItem
		
		local leng = tonumber(string.len(title))
		local leng2 = 80
		
		local spacing = 0
		local lendif = 0
		
		if leng > leng2 then
		else
			lendif = leng2 - leng
			lendif = lendif * 0.5
		end

		spacing = string.rep(" ", lendif)

		ColourNote(msg_colour, "", spacing, msg_colour, "", "Partroxis Maze Mob List - Searching for ", qty_colour, "", SearchItem)
		Note()
	end
	
	for i,v in ipairs(PartTable) do
		partnum = i

		local search = string.lower(PartTable[partnum]["Mob"])
		
        len = string.len(SearchItem)

		for i,v in pairs(string.split(search," ")) do
			if string.find(string.sub(v,1,len),SearchItem) == nil then
			else
				NotFound = "NO"
				
				if channel == "none" then 
					pleng = tonumber(string.len(partnum))
					
					if pleng == 1 then 
						roomnum = " " .. partnum
					else
						roomnum = partnum
					end
					
					if PartTable[partnum]["Room"] == nil then roomspace = 28 else roomspace = MakeSpace(PartTable[partnum]["Room"], 28) end
					
					ColourNote(msg_colour, "", "Room #: ", qty_colour, "", roomnum, msg_colour, "", " Room Name: ", qty_colour, "", PartTable[partnum]["Room"] .. roomspace, msg_colour, "", " Mob: ", qty_colour, "", PartTable[partnum]["Mob"])
				else
					message = "@DRoom #: @C" .. partnum .. " @DRoom Name: @C" .. PartTable[partnum]["Room"] .. "@D Mob: @C" .. PartTable[partnum]["Mob"] .. "@w"
				
					if tellcheck == "YES" then
						tellcheck = "NO"
						
						SendNoEcho("tell " .. channel .. " @R[Partroxis] " .. message)
					else
						SendNoEcho(channel .. " @R[Partroxis] " .. message)
					end
				end
			end
		end
	end
	
	SendNoEcho ("echo End of PARTROXIS SEARCH")
end -- SearchPart

function EndOfSearch()
	if NotFound == "YES" then
		if channel == "none" then	
			local title = "No Results Found"
		
			local leng = tonumber(string.len(title))
			local leng2 = 80

			local spacing = 0
			local lendif = 0

			if leng > leng2 then
			else
				lendif = leng2 - leng
				lendif = lendif * 0.5
			end

			spacing = string.rep(" ", lendif)

			Note()
			ColourNote(msg_colour, "", spacing, msg_colour, "", "No Results Found")
		else
			if tellcheck == "YES" then
				tellcheck = "NO"
				SendNoEcho("tell " .. channel .. " @R[Partroxis] @DSorry no results found for @C" .. search .. "@D.@w")
			else
				SendNoEcho(channel .. " @R[Partroxis] @DSorry no results found for @C" .. search .. "@D.@w")
			end
		end
	end
	
	world.EnableGroup ("PartSearchTrig", 0)
end -- EndOfSearch

function CreatePartTable()
	PartTable = {}

	PartTable[1] = {}
	PartTable[1]["Room"] = "In the mountains"
	PartTable[1]["Mob"] = "A Mountain of Rock"

	PartTable[2] = {}
	PartTable[2]["Room"] = "Through the Woods"
	PartTable[2]["Mob"] = "The Rabid Tiger-man"

	PartTable[3] = {}
	PartTable[3]["Room"] = "The Forest"
	PartTable[3]["Mob"] = "The man eating wolfen"

	PartTable[4] = {}
	PartTable[4]["Room"] = "Swampy Path"
	PartTable[4]["Mob"] = "The Buck Toothed Lizard-Man"

	PartTable[5] = {}
	PartTable[5]["Room"] = "The Forest"
	PartTable[5]["Mob"] = "The Living Tree"

	PartTable[6] = {}
	PartTable[6]["Room"] = "Along the River"
	PartTable[6]["Mob"] = "The Furious Flying Fish Man"

	PartTable[7] = {}
	PartTable[7]["Room"] = "The Desert"
	PartTable[7]["Mob"] = "The Quicksand"

	PartTable[8] = {}
	PartTable[8]["Room"] = "The Desert"
	PartTable[8]["Mob"] = "The Flesh Eating Ants"

	PartTable[9] = {}
	PartTable[9]["Room"] = "The Wheat Fields"
	PartTable[9]["Mob"] = "The Living Vines"

	PartTable[10] = {}
	PartTable[10]["Room"] = "In the Mountains"
	PartTable[10]["Mob"] = "The Gigantic Bulette"

	PartTable[11] = {}
	PartTable[11]["Room"] = "In the Mountains"
	PartTable[11]["Mob"] = "A Bird of Prey"

	PartTable[12] = {}
	PartTable[12]["Room"] = "A Cave"
	PartTable[12]["Mob"] = "The Otherworld Assassin"

	PartTable[13] = {}
	PartTable[13]["Room"] = "The Wheat Fields"
	PartTable[13]["Mob"] = "Vision of a False Portal"

	PartTable[14] = {}
	PartTable[14]["Room"] = "The Wheat Fields"
	PartTable[14]["Mob"] = "The Hungry Dragon"

	PartTable[15] = {}
	PartTable[15]["Room"] = "The Forest"
	PartTable[15]["Mob"] = "A Bloodthirsty Tiger-Man"

	PartTable[16] = {}
	PartTable[16]["Room"] = "The Swamp"
	PartTable[16]["Mob"] = "The Cold Hearted Lizard-Man"

	PartTable[17] = {}
	PartTable[17]["Room"] = "The Swamp"
	PartTable[17]["Mob"] = "The Insane Cheryb"

	PartTable[18] = {}
	PartTable[18]["Room"] = "River of Blood"
	PartTable[18]["Mob"] = "Flowing Blood"

	PartTable[19] = {}
	PartTable[19]["Room"] = "A small Cave"
	PartTable[19]["Mob"] = "A collapsing cave"

	PartTable[20] = {}
	PartTable[20]["Room"] = "A small Cave"
	PartTable[20]["Mob"] = "The Dream Eater"

	PartTable[21] = {}
	PartTable[21]["Room"] = "Through the Passage of Time"
	PartTable[21]["Mob"] = "Reality Check"

	PartTable[22] = {}
	PartTable[22]["Room"] = "The Swamp"
	PartTable[22]["Mob"] = "Blood Sucking Vines"

	PartTable[23] = {}
	PartTable[23]["Room"] = "The Forest"
	PartTable[23]["Mob"] = "The Golden Haired Assassin"

	PartTable[24] = {}
	PartTable[24]["Room"] = "The Wheat Fields"
	PartTable[24]["Mob"] = "Mass of Flying Dismembered Body Parts"

	PartTable[25] = {}
	PartTable[25]["Room"] = "The Wheat Fields"
	PartTable[25]["Mob"] = "Bloodthirsty Killer Gerbils"

	PartTable[26] = {}
	PartTable[26]["Room"] = "In the Mountains"
	PartTable[26]["Mob"] = "A Monster Bulette"

	PartTable[27] = {}
	PartTable[27]["Room"] = "The Wheat Fields"
	PartTable[27]["Mob"] = "the Thing"

	PartTable[28] = {}
	PartTable[28]["Room"] = "Along the River"
	PartTable[28]["Mob"] = "The Big and Deadly Dragon"

	PartTable[29] = {}
	PartTable[29]["Room"] = "The Wheat Field"
	PartTable[29]["Mob"] = "Soul of the Damned"

	PartTable[30] = {}
	PartTable[30]["Room"] = "In the Mountains"
	PartTable[30]["Mob"] = "Lesser Chitryn"

	PartTable[31] = {}
	PartTable[31]["Room"] = "In the Mountains"
	PartTable[31]["Mob"] = "Delusions of Hope"

	PartTable[32] = {}
	PartTable[32]["Room"] = "The Desert"
	PartTable[32]["Mob"] = "Swarm of Blood Sucking Bio-chemical Gnats"

	PartTable[33] = {}
	PartTable[33]["Room"] = "The Swamp"
	PartTable[33]["Mob"] = "It"

	PartTable[34] = {}
	PartTable[34]["Room"] = "The Desert"
	PartTable[34]["Mob"] = "Your Worst Nightmare"

	PartTable[35] = {}
	PartTable[35]["Room"] = "The Wheat Field"
	PartTable[35]["Mob"] = "Walking Suit of Armor"

	PartTable[36] = {}
	PartTable[36]["Room"] = "A Cave"
	PartTable[36]["Mob"] = "Lesser Labyrinth Dragon"

	PartTable[37] = {}
	PartTable[37]["Room"] = "A Cave"
	PartTable[37]["Mob"] = "Insane Cheryb"

	PartTable[38] = {}
	PartTable[38]["Room"] = "In the Mountains"
	PartTable[38]["Mob"] = "Labyrinth Dragon"

	PartTable[39] = {}
	PartTable[39]["Room"] = "In the Mountains"
	PartTable[39]["Mob"] = "Hell Hound Behemoths"

	PartTable[40] = {}
	PartTable[40]["Room"] = "A Vast Expense of the Plains"
	PartTable[40]["Mob"] = "Chaodyn"
end -- CreatePartTable

function MakeSpace(title, maxleng)
	local leng = tonumber(string.len(title))
	local leng2 = tonumber(maxleng)
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
	end

	spacing = string.rep(" ", lendif)
	return spacing
end -- MakeSpace

function HelpSpacing(title, title2)
	local leng = tonumber(string.len(title))
	local leng2 = tonumber(string.len(title2))
	
	local spacing = 0
	local lendif = 0
	
	if leng > leng2 then
	else
		lendif = leng2 - leng
		lendif = lendif * 0.5
	end

	spacing = string.rep(" ", lendif)
	
	return spacing
end -- HelpSpacing

function tpart_help()
	local title = "Tallimos' Partroxis Maze Mob List v" .. PLUGIN_VERSION .. " Help"
	local title2 = noteline

	spacing = HelpSpacing(title, title2)
	
	ColourNote(help_colour, "", spacing, help_command_colour, "", title)
	
	ColourNote(help_colour, "", title2)
	ColourNote(help_colour, "", "This plugin gives the user a quick reference to the list of mobs in the partroxis maze.")
	ColourNote(help_colour, "", title2)
	
	
	ColourNote(help_command_colour, "", "tpart list                  ", help_colour, "", " - command to display the entire partroxis room list")
	
	ColourNote(help_command_colour, "", "tpart <mob name>            ", help_colour, "", " - command used to search the list for a particular partroxis mob")

	ColourNote(help_command_colour, "", "tpart chan <chan> <mob name>", help_colour, "", " - command used to search the list for a particular partroxis mob")
	ColourNote(help_colour, "", "                               and display it to a channel")
	
	ColourNote(help_command_colour, "", "tpart tell <char> <mob name>", help_colour, "", " - command used to search the list for a particular partroxis mob")
	ColourNote(help_colour, "", "                               and display it in a tell")

	Note("")
	ColourNote("red", "", "PLEASE NOTE", help_colour, "", ": When searching enter only one of the mobs keywords")

	ColourNote(help_colour, "", title2)
	Note("")
end	-- tpart_help

function OnPluginInstall ()
	PLUGIN_VERSION  = GetPluginInfo(GetPluginID(), 19)
	PLUGIN_NAME   = GetPluginInfo(GetPluginID(), 1)

	ColourNote(msg_colour, "", "Thank you for installing Tallimos' Partroxis Maze Mob List v", qty_colour, "", PLUGIN_VERSION, msg_colour, "", " . Please see ", help_command_colour, "", "tpart help", msg_colour, "", " for more information.")
	
	CreatePartTable()
end

function OnPluginEnable()
	CreatePartTable()
end

]]>
</script>
</muclient>
